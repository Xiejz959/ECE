vlib work
vmap work work

# Compile VHDL source files
vcom "D:/FPGA/Lab7/lab7_part2/hex_display_decoder.vhd"
vcom "D:/FPGA/Lab7/lab7_part2/two_digit_display.vhd"

# Load simulation
vsim -voptargs=+acc work.two_digit_display

add wave *

proc to_bin_str {value} {
    set bits ""
    for {set i 3} {$i >= 0} {incr i -1} {
        set bit [expr { ( $val / (2 ** $i) ) % 2 }]
        append bits $bit
    }
    return $bits
}

# Ain = 0~15
for {set a 0} {$a < 16} {incr a} {
    
    # Bin = 0~15
    for {set b 0} {$b < 16} {incr b} {

        set abin [to_bin_str $a]
        set bbin [to_bin_str $b]

        force Ain b"$abin"
        force Bin b"$bbin"

        run 100
    }
}

